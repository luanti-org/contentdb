{% extends "base.html" %}

{% block title %}
{{ page['title'] }}
{% endblock %}

{% block description %}{{ page['description'] }}{% endblock %}

{% block container %}

{% set html = page.html %}
<div class="container pt-4">
	<ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
		<li class="breadcrumb-item" itemscope itemprop="itemListElement" itemtype="https://schema.org/ListItem">
			<a href="{{ request.url_root }}" title="Go to home page" itemprop="item">
				<span itemprop="name">Home</span>
				<meta itemprop="position" content="1" />
			</a>
		</li>
		<li class="breadcrumb-item active" itemscope itemprop="itemListElement" itemtype="https://schema.org/ListItem">
			<a href="{{ request.base_url }}" title="Go to {{ page['title'] }}" itemprop="item">
				<span itemprop="name">{{ page['title'] }}</span>
				<meta itemprop="position" content="2" />
			</a>
		</li>
	</ol>
</div>
{% if page.meta.get("toc", True) %}
	<div class="container mt-4">
		<main class="d-flex gap-5 flex-column flex-md-row-reverse">
			<nav class="flex-grow-0 flex-shrink-0 toc" style="flex-basis: 25%;">
				{% set headings = get_headings(html) %}
				<ul class="nav flex-column" role="menu">
					{% for item in headings recursive %}
						<li class="nav-item">
							<a class="nav-link" href="#{{ item.link }}">
								{{ item.text }}
							</a>
							{% if item.children %}
								<ul class="nav flex-column" role="menu">
									{{ loop(item.children) }}
								</ul>
							{% endif %}
						</li>
					{% endfor %}
				</ul>
			</nav>
			<article class="flex-grow-1 content">
				<h1 class="mb-4">{{ page['title'] }}</h1>

				{{ html | safe }}
			</article>

		</main>
	</div>
{% else %}
	<div class="container mt-4">
		<article class="content">
			<h1 class="mb-4">{{ page['title'] }}</h1>

			{{ html | safe }}
		</article>
	</div>
{% endif %}

{% endblock %}
